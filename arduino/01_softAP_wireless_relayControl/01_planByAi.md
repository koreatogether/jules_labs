## 아두이노 코딩 계획 (readme.md 기반)

### 1. 기본 환경 설정
- **Arduino R4 WiFi 보드 설정**:
    - WiFi 라이브러리 포함 및 초기화.
    - SoftAP 모드 설정 (SSID, 비밀번호 등).
- **릴레이 모듈 핀 설정**:
    - 연결된 릴레이 채널 수에 따라 GPIO 핀 할당.
    - 초기 릴레이 상태 설정 (모두 꺼짐).
- **디스플레이 초기화**:
    - **서버 (TFT LCD)**:
        - TFT LCD 라이브러리 포함 (예: Adafruit GFX, MCUFRIEND_kbv).
        - 터치스크린 라이브러리 포함 및 초기화.
        - 기본 UI 레이아웃 설계.
    - **클라이언트 (OLED)**:
        - SH1116 호환 OLED 라이브러리 포함 (예: U8g2).
        - I2C 통신 설정.
        - 기본 정보 표시 화면 설계.

### 2. SoftAP 무선 통신 구현
- **웹 서버 생성**:
    - ESP8266WebServer 또는 WiFiWebServer 라이브러리 활용.
    - HTTP GET/POST 요청 처리를 위한 핸들러 함수 정의.
- **릴레이 제어 API 설계**:
    - 예: `/relay?channel=1&status=on` 형태의 URL 엔드포인트.
    - 각 채널별 켜기/끄기 명령 처리 로직.
- **상태 정보 교환**:
    - 클라이언트로부터의 연결 요청 처리.
    - 현재 릴레이 상태 정보를 클라이언트 또는 웹 UI로 전송.

### 3. UI 구현
- **서버 측 (TFT LCD 터치스크린)**:
    - **메인 화면**:
        - 현재 IP 주소 및 SoftAP 연결 상태 표시.
        - 제어할 릴레이 채널 수 선택 UI (1, 2, 4, 8 채널).
    - **릴레이 제어 화면 (채널 수에 따라 동적 변경)**:
        - 각 채널별 ON/OFF 터치 버튼 생성.
        - 현재 각 릴레이의 상태 시각적으로 표시.
        - 통신 상태 및 명령 결과 피드백 표시 영역.
    - **터치 이벤트 처리**:
        - 터치 좌표를 읽어 해당 버튼의 동작 수행.
        - 릴레이 제어 명령 전송 및 결과 업데이트.
- **클라이언트 측 (OLED 디스플레이)**:
    - 서버로부터 받은 릴레이 상태 정보 표시.
    - 필요한 경우 간단한 제어 입력 기능 (버튼 등 활용).
    - 연결 상태 및 오류 메시지 표시.

### 4. 릴레이 제어 로직
- **다채널 릴레이 관리**:
    - 선택된 채널 수에 맞는 릴레이 제어 로직 활성화.
    - 각 채널별 상태 변수 관리.
- **명령 실행 및 피드백**:
    - 수신된 명령에 따라 해당 릴레이 GPIO 제어 (HIGH/LOW).
    - 실행 결과를 서버 UI 및 클라이언트에 전송.

### 5. 폴더 구조 및 코드 관리 (readme.md 내용 반영)
- **01_문서**: 프로젝트 관련 문서 저장 (현재 `01_planByAi.md` 포함).
- **02_개별코드**: 각 기능별(디스플레이, 통신, 릴레이 제어 등) 테스트 및 단위 코드.
    - 예: `02_개별코드/TFT_LCD_test`, `02_개별코드/OLED_display_test`, `02_개별코드/SoftAP_test`
- **03_통합코드**: 개별 기능들을 통합한 최종 애플리케이션 코드.
    - 초기에는 1채널 제어부터 시작하여 점진적으로 2, 4, 8채널 확장.

### 6. 개발 단계 및 테스트
- **1단계: 기본 SoftAP 통신 및 1채널 릴레이 제어**:
    - TFT LCD에 1채널 제어 UI 구현.
    - 웹 브라우저 또는 간단한 클라이언트로 릴레이 제어 테스트.
- **2단계: 다채널 릴레이 제어 확장**:
    - 2, 4, 8채널 제어 로직 및 UI 추가.
    - 채널 선택 기능 구현.
- **3단계: 클라이언트 OLED 디스플레이 연동**:
    - 서버로부터 릴레이 상태를 받아 OLED에 표시.
- **4단계: UI/UX 개선 및 안정화**:
    - 통신 상태, 오류 처리 등 예외 상황 처리 강화.
    - 사용자 피드백 반영.

### 7. 추가 고려 사항
- **보안**: SoftAP 비밀번호 설정 외 추가적인 보안 고려 (필요시).
- **확장성**: 향후 기능 추가 (센서 연동 등)를 고려한 코드 구조 설계.
- **전원 관리**: 안정적인 전원 공급 방안.

이 계획은 `readme.md`의 내용을 바탕으로 작성되었으며, 실제 개발 과정에서 세부 내용은 변경되거나 추가될 수 있습니다.
